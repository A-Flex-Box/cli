è¿™æ˜¯ä¸ºä½ æ•´ç†çš„å®Œæ•´ç‰ˆ `README.md`ã€‚

ä½ å¯ä»¥ç›´æ¥å°†ä»¥ä¸‹å†…å®¹ä¿å­˜ä¸ºé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `README.md` æ–‡ä»¶ã€‚å®ƒæ¶µç›–äº†é¡¹ç›®ä»‹ç»ã€ç›®å½•ç»“æ„ã€ä¸€é”®éƒ¨ç½²å‘½ä»¤ã€Linux ç³»ç»Ÿè®¾ç½®æé†’ä»¥åŠå®Œæ•´çš„æµ‹è¯•æµç¨‹ã€‚

---

```markdown
# Elasticsearch + Kibana + IK Analyzer ä¸€é”®éƒ¨ç½²

è¿™æ˜¯ä¸€ä¸ªåŸºäº Docker Compose å’Œ Makefile çš„ Elasticsearch (ES) + Kibana å¿«é€Ÿéƒ¨ç½²æ–¹æ¡ˆï¼Œ**å·²é›†æˆ IK ä¸­æ–‡åˆ†è¯å™¨**ã€‚

**ä¸»è¦ç‰¹æ€§ï¼š**
* ğŸš€ **ä¸€é”®å¯åŠ¨**ï¼šè‡ªåŠ¨å¤„ç†æ’ä»¶ä¸‹è½½ã€è§£å‹å’ŒæŒ‚è½½ã€‚
* ğŸ‡¨ğŸ‡³ **ä¸­æ–‡æ”¯æŒ**ï¼šé¢„è£… `ik_smart` å’Œ `ik_max_word` åˆ†è¯å™¨ï¼ŒKibana å·²è®¾ä¸ºä¸­æ–‡ç•Œé¢ã€‚
* âš¡ **ç½‘ç»œä¼˜åŒ–**ï¼šåˆ©ç”¨å®¿ä¸»æœºç½‘ç»œä¸‹è½½æ’ä»¶ï¼Œé¿å… Docker å†…éƒ¨æ„å»ºæ—¶çš„ç½‘ç»œè¶…æ—¶é—®é¢˜ã€‚
* ğŸ”“ **å¼€å‘å‹å¥½**ï¼šé»˜è®¤å…³é—­ SSL å’Œ X-Pack å®‰å…¨éªŒè¯ï¼ˆæ— è´¦å·å¯†ç ï¼‰ï¼Œæ–¹ä¾¿æœ¬åœ°å¼€å‘è°ƒè¯•ã€‚

---

## ğŸ“‚ ç›®å½•ç»“æ„

```text
.
â”œâ”€â”€ Makefile             # [æ ¸å¿ƒ] è‡ªåŠ¨åŒ–è„šæœ¬ï¼šä¸‹è½½æ’ä»¶ã€ç®¡ç†å®¹å™¨ç”Ÿå‘½å‘¨æœŸ
â”œâ”€â”€ docker-compose.yml   # å®¹å™¨ç¼–æ’é…ç½®
â”œâ”€â”€ README.md            # è¯´æ˜æ–‡æ¡£
â””â”€â”€ plugins/             # [è‡ªåŠ¨ç”Ÿæˆ] å­˜æ”¾ä¸‹è½½å¹¶è§£å‹åçš„ IK åˆ†è¯å™¨
â””â”€â”€ es_data/             # æ•°æ®ç›®å½•
```

---

## ğŸ›  å‰ç½®è¦æ±‚

* **Docker** & **Docker Compose**
* **Make** (å¤§å¤šæ•° Linux/Mac è‡ªå¸¦ï¼ŒWindows ç”¨æˆ·éœ€å®‰è£…æˆ–ä½¿ç”¨ Git Bash)
* **unzip** (ç”¨äºè§£å‹æ’ä»¶)
* **curl** (ç”¨äºæµ‹è¯•)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é¦–æ¬¡å¯åŠ¨ (One-Click)

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š

```bash
make

```

> **è„šæœ¬æ‰§è¡Œæµç¨‹ï¼š**
> 1. æ£€æŸ¥ `plugins/analysis-ik` æ˜¯å¦å­˜åœ¨ã€‚
> 2. ä¸å­˜åœ¨åˆ™è‡ªåŠ¨ä» Github ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ IK æ’ä»¶ zip åŒ…ã€‚
> 3. è§£å‹æ’ä»¶åˆ° `plugins/` ç›®å½•ã€‚
> 4. å¯åŠ¨ Docker Compose æœåŠ¡ã€‚
> 
> 

### 2. è®¿é—®æœåŠ¡

å¯åŠ¨æˆåŠŸåï¼ˆéœ€ç­‰å¾…çº¦ 1 åˆ†é’Ÿï¼‰ï¼š

* **Elasticsearch**: [http://localhost:9200](https://www.google.com/search?q=http://localhost:9200)
* **Kibana**: [http://localhost:5601](https://www.google.com/search?q=http://localhost:5601)

---

## âš ï¸ Linux ç”¨æˆ·å¿…è¯»

Elasticsearch å¯¹è™šæ‹Ÿå†…å­˜æœ‰è¦æ±‚ã€‚å¦‚æœåœ¨ Linux ä¸Šå¯åŠ¨å¤±è´¥ï¼ˆExit Code 78ï¼‰ï¼Œè¯·æ‰§è¡Œï¼š

```bash
# ä¸´æ—¶ç”Ÿæ•ˆ
sudo sysctl -w vm.max_map_count=262144

# æ°¸ä¹…ç”Ÿæ•ˆ (å†™å…¥é…ç½®æ–‡ä»¶)
echo "vm.max_map_count=262144" | sudo tee -a /etc/sysctl.conf
sudo sysctl -p

```

*(Mac å’Œ Windows Docker Desktop ç”¨æˆ·é€šå¸¸æ— éœ€æ­¤æ“ä½œ)*

---

## ğŸ§ª éªŒè¯ä¸æµ‹è¯• (Curl)

ä½ å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯å¤åˆ¶ä»¥ä¸‹å‘½ä»¤ï¼ŒéªŒè¯é›†ç¾¤æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚

### 1. æ£€æŸ¥èŠ‚ç‚¹ä¸æ’ä»¶

```bash
# æŸ¥çœ‹ ES ç‰ˆæœ¬ (åº”ä¸º 8.11.1)
curl -s "localhost:9200/?pretty" | grep number

# æŸ¥çœ‹å·²åŠ è½½æ’ä»¶ (å¿…é¡»åŒ…å« analysis-ik)
curl -s "localhost:9200/_cat/plugins?v"

```

### 2. æµ‹è¯•ä¸­æ–‡åˆ†è¯

éªŒè¯ IK åˆ†è¯å™¨æ˜¯å¦ç”Ÿæ•ˆã€‚

**æµ‹è¯• `ik_smart` (ç²—ç²’åº¦):**

```bash
curl -X POST "localhost:9200/_analyze?pretty" -H 'Content-Type: application/json' -d'
{
  "analyzer": "ik_smart",
  "text": "ä»Šå¤©å¤©æ°”çœŸä¸é”™"
}'

```

**æµ‹è¯• `ik_max_word` (ç»†ç²’åº¦):**

```bash
curl -X POST "localhost:9200/_analyze?pretty" -H 'Content-Type: application/json' -d'
{
  "analyzer": "ik_max_word",
  "text": "ä¸­åäººæ°‘å…±å’Œå›½å›½æ­Œ"
}'

```

### 3. å®Œæ•´ä¸šåŠ¡æµç¨‹æµ‹è¯•

æ¨¡æ‹Ÿå»ºç´¢å¼•ã€æ’å…¥æ•°æ®å’Œæœç´¢ã€‚

```bash
# 1. åˆ›å»ºç´¢å¼• 'news'ï¼ŒæŒ‡å®š title å­—æ®µä½¿ç”¨ ik_max_word åˆ†è¯
curl -X PUT "localhost:9200/news" -H 'Content-Type: application/json' -d'
{
  "mappings": {
    "properties": {
      "title": { "type": "text", "analyzer": "ik_max_word" }
    }
  }
}'

# 2. æ’å…¥ä¸€æ¡æ–‡æ¡£
curl -X POST "localhost:9200/news/_doc/1" -H 'Content-Type: application/json' -d'
{ "title": "åä¸ºå‘å¸ƒæ–°æ¬¾Mate60æ‰‹æœºï¼Œé¥é¥é¢†å…ˆ" }'

# 3. æœç´¢å…³é”®è¯ "é¥é¥é¢†å…ˆ"
curl -X GET "localhost:9200/news/_search?pretty" -H 'Content-Type: application/json' -d'
{
  "query": { "match": { "title": "é¥é¥é¢†å…ˆ" } }
}'

```

---

## âš™ï¸ è¿ç»´å‘½ä»¤ (Makefile)

| å‘½ä»¤ | ä½œç”¨ |
| --- | --- |
| `make` | **æ¨è**ã€‚ä¸‹è½½æ’ä»¶ã€è§£å‹å¹¶å¯åŠ¨æœåŠ¡ã€‚ |
| `make up` | ä»…æ‰§è¡Œ `docker compose up -d` (å‡è®¾æ’ä»¶å·²å‡†å¤‡å¥½)ã€‚ |
| `make down` | åœæ­¢å¹¶ç§»é™¤å®¹å™¨ (æ•°æ®ä¿ç•™åœ¨ Docker Volume ä¸­)ã€‚ |
| `make reset` | **å±é™©**ã€‚åœæ­¢å®¹å™¨ï¼Œ**åˆ é™¤æ’ä»¶ç›®å½•**ï¼Œ**åˆ é™¤æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶**ã€‚æ¢å¤åˆ°åˆš Clone ä¸‹æ¥çš„çŠ¶æ€ã€‚ |

---

## ğŸ“ ç‰ˆæœ¬ä¿¡æ¯

* **Elasticsearch**: 8.11.1
* **Kibana**: 8.11.1
* **IK Analyzer**: 8.11.1